var data_table_rendered,show_layer=!0,auto_search_result={},pp_code="",pp_id="",timer=window.setInterval((function(){null!=xajax.callback&&(window.clearInterval(timer),init_xajax_error())}),100);function ucfirst(e){return e.charAt(0).toUpperCase()+e.slice(1)}function enable_tool_tips(){[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map((function(e){return new bootstrap.Tooltip(e)}))}function enable_popover(){[].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]')).map((function(e){return new bootstrap.Popover(e)}))}function hide_tooltip(e){var t=document.getElementById(e);bootstrap.Tooltip.getInstance(t).hide()}function init_xajax_error(){xajax.callback.global.onFailure=function(e){xajax_error(e)}}function getCss(e){return $("#"+e).css()}function copy_text(e,t){var n=document.getElementById(e);n.select(),n.setSelectionRange(0,99999),navigator.clipboard.writeText(n.value),0!=t&&popup("Copied","Short Url copied in your clipboard",50,3e3)}function copy_to_clipboard(e,t){copy_text(e,!1),$("#clipboard_copy_"+t).hide(),$("#clipboard_copy_done_"+t).show(),setTimeout((function(){$("#clipboard_copy_done_"+t).hide(),$("#clipboard_copy_"+t).show()}),2e3)}function waitForElm(e){return new Promise((t=>{if(document.querySelector(e))return t(document.querySelector(e));const n=new MutationObserver((o=>{document.querySelector(e)&&(t(document.querySelector(e)),n.disconnect())}));n.observe(document.body,{childList:!0,subtree:!0})}))}function startTime(){var e=new Date,t=e.getHours(),n=e.getMinutes(),o=e.getSeconds();ap=t<12?"<span>AM</span>":"<span>PM</span>",t=checkTime(t=(t=0==t?12:t)>12?t-12:t),n=checkTime(n),o=checkTime(o),document.getElementById("timer_section").innerHTML=t+":"+n+":"+o+" "+ap;var a=["Domenica","Lunedi","Martedi","Mercoledi","Giovedi","Venerdi","Sabato"][e.getDay()]+", "+e.getDate()+" "+["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago.","Set","Ott","Nov","Dic"][e.getMonth()]+" "+e.getFullYear();document.getElementById("date_section").innerHTML=a;setTimeout((function(){startTime()}),1e3)}function getRndInteger(e,t){return Math.floor(Math.random()*(t-e+1))+e}function checkTime(e){return e<10&&(e="0"+e),e}function bind_on_change(e,t,n,o){null==o&&(o=4),$("#"+e).on("change",(function(a){show_layer=!1;var r=a.target.value;check_length(e,o)?xajax_execute(t,n,r):show_too_short(e,o)}))}function show_too_short(e,t){var n=$("#"+e).val(),o=t-n.length;$("#"+e).val("You need "+o+" character(s) more...wait please"),$("#"+e).prop("disabled",!0),setTimeout((function(){$("#"+e).val(n),$("#"+e).prop("disabled",!1),$("#"+e).focus()}),1500)}function check_length(e,t){return!($("#"+e).val().length<t)}function render_auto_search(e,t,n,o,a){if(null!=o)var r=o;else r=null;var i=$("#"+e);if(null==a)a=3;var l=localStorage.getItem("CUP");i.select2({width:r,enabled:!0,delay:250,minimumInputLength:a,data:auto_search_result,placeholder:"Search through your saved URLs...",language:"en",formatNoMatches:function(e){return"No results found"},formatSearching:function(){return"Searching..."},initSelection:function(e,t){t(auto_search_result)},formatInputTooShort:function(e,t){return"At least "+(t-e.length)+" character more"},ajax:{url:"/ajax_requests/ajax_"+t+"/auto_search",dataType:"json",type:"POST",quietMillis:100,data:function(e){return{term:e.term,CUP:l}}}}),i.on("select2:select",(function(e){show_layer=!1;var t=e.params.data;xajax_execute(n,"autosearch",t)}))}function crea_pp(){paypal.Buttons({style:{shape:"rect",color:"gold",layout:"vertical",label:"paypal"},createSubscription:function(e,t){return t.subscription.create({plan_id:pp_id,custom_id:pp_code})},onApprove:function(e,t){return t.subscription.get().then((function(e){xajax_execute("Payments/Main_paypal","paypal_acquistato",e)}))},onCancel:function(e){xajax_execute("Payments/Main_paypal","paypal_annullato",e)}}).render("#paypal-button")}function load_content(e){document.getElementById("full_stat_content").src=e}function redraw_data_table(e){null!=data_table_rendered&&data_table_rendered.draw()}function do_data_table(e,t,n,o,a,r){sort_order=null==t?[[1,"desc"]]:t,dataTypes=null==o?[]:o,null==r&&(r=10);var i=localStorage.getItem("CUP");n.includes("_")?(myArray=n.split("_"),my_function=myArray.pop(),my_ajax_section=myArray.join("_")):(my_ajax_section=n,my_function=n),data_table_rendered=new DataTable("#"+e,{bJQueryUI:!1,sPaginationType:"full_numbers",aoColumnDefs:dataTypes,iTotalRecords:r,iTotalDisplayRecords:r,scrollX:!0,bPaginate:!0,bProcessing:!0,bDeferRender:!0,aaSorting:sort_order,bServerSide:!0,sServerMethod:"POST",ajax:{url:"/ajax/"+ucfirst(my_ajax_section)+"/ajax_"+my_ajax_section+"/get_"+my_function+"_tabella/"+a,dataType:"json",type:"POST",data:function(e){e.filtro_data=$("#filtro_data").val(),e.filtro_tipo=$("#drop_down_ID_Tipo_Record_lista").val(),e.filtro_cliente=$("#drop_down_ID_Cliente_lista").val(),e.CUP=i}}})}window.addEventListener("popstate",(function(e){history.pushState(null,null,window.location.pathname)}),!1),document.addEventListener("DOMContentLoaded",(function(){$("#navbarNavDropdown .dropdown").hover((function(){var e=$(this).children(".dropdown-menu");e.is(":visible")&&e.parent().toggleClass("open")})),window.innerWidth<992&&(document.querySelectorAll(".navbar .dropdown").forEach((function(e){e.addEventListener("hidden.bs.dropdown",(function(){this.querySelectorAll(".submenu").forEach((function(e){e.style.display="none"}))}))})),document.querySelectorAll(".dropdown-menu a").forEach((function(e){e.hover((function(e){let t=this.nextElementSibling;t&&t.classList.contains("submenu")&&(e.preventDefault(),"block"==t.style.display?t.style.display="none":t.style.display="block")}))})))}));