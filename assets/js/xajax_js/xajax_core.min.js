/*
@package xajax
@version $Id: xajax_core_uncompressed.js,v 1.1 2013-02-11 00:49:41 developer Exp $
@copyright Copyright (c) 2005-2006 by Jared White & J. Max Wilson
@license http://www.xajaxproject.org/bsd_license.txt BSD License
*/
try{void 0===xajax.config&&(xajax.config={})}catch(e){xajax={},xajax.config={}}xajax.config.setDefault=function(e,t){void 0===xajax.config[e]&&(xajax.config[e]=t)},xajax.config.setDefault("commonHeaders",{"If-Modified-Since":"Sat, 1 Jan 2000 00:00:00 GMT"}),xajax.config.setDefault("postHeaders",{}),xajax.config.setDefault("getHeaders",{}),xajax.config.setDefault("waitCursor",!0),xajax.config.setDefault("statusMessages",!0),xajax.config.setDefault("baseDocument",document),xajax.config.setDefault("requestURI",xajax.config.baseDocument.URL),xajax.config.setDefault("defaultMode","asynchronous"),xajax.config.setDefault("defaultHttpVersion","HTTP/2.0"),xajax.config.setDefault("defaultContentType","application/x-www-form-urlencoded"),xajax.config.setDefault("defaultResponseDelayTime",1e3),xajax.config.setDefault("defaultExpirationTime",1e4),xajax.config.setDefault("defaultMethod","POST"),xajax.config.setDefault("defaultRetry",5),xajax.config.setDefault("defaultReturnValue",!1),xajax.config.setDefault("maxObjectDepth",20),xajax.config.setDefault("maxObjectSize",2e3),xajax.config.setDefault("siteTitle",document.title),xajax.config.status={update:function(){return{onRequest:function(){document.title="Request sent...",document.body.style.cursor="wait"},onWaiting:function(){document.title="Waiting for the reply..."},onProcessing:function(){document.title="In processing..."},onComplete:function(){document.title="All done!",document.body.style.cursor="",setTimeout((function(){document.title=xajax.config.siteTitle}),1e3)}}},dontUpdate:function(){return{onRequest:function(){},onWaiting:function(){},onProcessing:function(){},onComplete:function(){}}}},xajax.config.cursor={update:function(){return{onWaiting:function(){xajax.config.baseDocument.body&&(xajax.config.baseDocument.body.style.cursor="wait")},onComplete:function(){xajax.config.baseDocument.body.style.cursor="auto"}}},dontUpdate:function(){return{onWaiting:function(){},onComplete:function(){}}}},xajax.tools={},xajax.tools.$=function(e){if(!e)return null;var t=xajax.config.baseDocument,a=t.getElementById(e);return a||(t.all?t.all[e]:a)},xajax.tools.arrayContainsValue=function(e,t){for(var a=0,n=e.length;a<n;){if(e[a]==t)return!0;++a}return!1},xajax.tools.doubleQuotes=function(e){return e.replace(new RegExp("'","g"),'"')},xajax.tools.singleQuotes=function(e){return e.replace(new RegExp('"',"g"),"'")},xajax.tools._escape=function(e){if(void 0===e)return e;if("string"!=typeof e)return e;var t=!1;if(encodeURIComponent(e)!=e){t=!0;var a=e.split("<![CDATA["),n=a.length;e=[];for(var r=0;r<n;++r){var o=a[r],s=o.split("]]>"),u=s.length;o="";for(var l=0;l<u;++l)0!=l&&(o+="]]]]><![CDATA[>"),o+=s[l];0!=r&&e.push("<![]]><![CDATA[CDATA["),e.push(o)}e=e.join("")}return t&&(e="<![CDATA["+e+"]]>"),e},xajax.tools._objectToXML=function(e,t){var a=[];for(var n in a.push("<xjxobj>"),e){if(++t.size,t.maxSize<t.size)return a.join("");if(void 0!==e[n]){if("constructor"==n)continue;if("function"==typeof e[n])continue;a.push("<e><k>");var r=xajax.tools._escape(n);if(a.push(r),a.push("</k><v>"),"object"==typeof e[n]){if(++t.depth,t.maxDepth>t.depth)try{a.push(xajax.tools._objectToXML(e[n],t))}catch(e){}--t.depth}else{if(void 0===(r=xajax.tools._escape(e[n]))||null==r)a.push("*");else{var o=typeof r;"string"==o?a.push("S"):"boolean"==o?a.push("B"):"number"==o&&a.push("N"),a.push(r)}}a.push("</v></e>")}}return a.push("</xjxobj>"),a.join("")},xajax.tools._enforceDataType=function(e){var t=(e=new String(e)).substr(0,1);return e=e.substr(1),"*"==t?e=null:"N"==t?e-=0:"B"==t&&(e=!!e),e},xajax.tools._nodeToObject=function(e){if(null==e)return"";if(void 0!==e.nodeName){if("#cdata-section"==e.nodeName||"#text"==e.nodeName){var t="";do{e.data&&(t+=e.data)}while(e=e.nextSibling);return xajax.tools._enforceDataType(t)}if("xjxobj"==e.nodeName){for(var a=null,n=null,r=(t=new Array,e.firstChild);r;){if("e"==r.nodeName){for(var o=r.firstChild;o;)"k"==o.nodeName?a=xajax.tools._enforceDataType(o.firstChild.data):o.nodeName,n=xajax.tools._nodeToObject(o.firstChild),o=o.nextSibling;null!=a&&(t[a]=n,a=n=null)}r=r.nextSibling}return t}}throw{code:10001,data:e.nodeName}},xajax.tools.getRequestObject=function(){return"undefined"!=typeof XMLHttpRequest?xajax.tools.getRequestObject=function(){return new XMLHttpRequest}:"undefined"!=typeof ActiveXObject?xajax.tools.getRequestObject=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.4.0")}catch(e){return xajax.tools.getRequestObject=function(){try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){return xajax.tools.getRequestObject=function(){return new ActiveXObject("Microsoft.XMLHTTP")},xajax.tools.getRequestObject()}},xajax.tools.getRequestObject()}}:window.createRequest?xajax.tools.getRequestObject=function(){return window.createRequest()}:xajax.tools.getRequestObject=function(){throw{code:10002}},xajax.tools.getRequestObject()},xajax.tools.getBrowserHTML=function(e){var t=xajax.config.baseDocument;if(!t.body)return"";var a=xajax.$("xajax_temp_workspace");a||((a=t.createElement("div")).setAttribute("id","xajax_temp_workspace"),a.style.display="none",a.style.visibility="hidden",t.body.appendChild(a)),a.innerHTML=e;var n=a.innerHTML;return a.innerHTML="",n},xajax.tools.willChange=function(element,attribute,newData){var oldData;return"string"==typeof element&&(element=xajax.$(element)),!!element&&(eval("oldData=element."+attribute),newData!=oldData)},xajax.tools.getFormValues=function(e){var t=!1;arguments.length>1&&1==arguments[1]&&(t=!0);var a="";arguments.length>2&&(a=arguments[2]),"string"==typeof e&&(e=xajax.$(e));var n={};return e&&e.childNodes&&xajax.tools._getFormValues(n,e.childNodes,t,a),n},xajax.tools._getFormValues=function(e,t,a,n){for(var r=t.length,o=0;o<r;++o){var s=t[o];void 0!==s.childNodes&&xajax.tools._getFormValues(e,s.childNodes,a,n),xajax.tools._getFormValue(e,s,a,n)}},xajax.tools._getFormValue=function(e,t,a,n){if((t.name||t.id)&&(!t.disabled||1!=t.disabled||0!=a)){if(t.name){if(n!=t.name.substring(0,n.length))return}else if(t.id){if(n!=t.id.substring(0,n.length))return}else alert("Non posso identificare l'elemento "+t);if(!t.type||"radio"!=t.type&&"checkbox"!=t.type||0!=t.checked){if(t.name)var r=t.name;else r=t.id;var o=[];if("select-multiple"==t.type)for(var s=t.length,u=0;u<s;++u){var l=t.options[u];1==l.selected&&o.push(l.value)}else o=t.value;if(0<=r.indexOf("[")){var x=r,c=x.substr(0,x.indexOf("[")),i=x.substr(x.indexOf("["));void 0===e[c]&&(e[c]=[]);for(var d=e;0!=i.length;){var m=i.substr(0,i.indexOf("]")+1),p=c,f=d;i=i.substr(i.indexOf("]")+1),d=d[c],""==(c=m.substr(1,m.length-2))&&("select-multiple"==t.type?(c=p,d=f):c=d.length),void 0===d[c]&&(d[c]=[])}d[c]=o}else e[r]=o}}},xajax.tools.stripOnPrefix=function(e){return 0==(e=e.toLowerCase()).indexOf("on")&&(e=e.replace(/on/,"")),e},xajax.tools.addOnPrefix=function(e){return 0!=(e=e.toLowerCase()).indexOf("on")&&(e="on"+e),e},xajax.tools.xml={},xajax.tools.xml.parseAttributes=function(e,t){for(var a=e.attributes.length,n=0;n<a;++n){var r=e.attributes[n];switch(r.name){case"n":t.cmd=r.value;break;case"t":t.id=r.value;break;case"p":t.property=r.value;break;case"c":t.type=r.value;break;case"f":t.func=r.value;break;case"dvn":t.dvn=r.value}}},xajax.tools.xml.parseChildren=function(e,t){if(t.data="",0<e.childNodes.length)if(1<e.childNodes.length){var a=e.firstChild;do{"#cdata-section"!=a.nodeName&&"#text"!=a.nodeName||(t.data+=a.data)}while(a=a.nextSibling)}else{if("xjxobj"==(a=e.firstChild).nodeName)return void(t.data=xajax.tools._nodeToObject(a));"#cdata-section"!=a.nodeName&&"#text"!=a.nodeName||(t.data=a.data)}else void 0!==e.data&&(t.data=e.data);t.data=xajax.tools._enforceDataType(t.data)},xajax.tools.xml.processFragment=function(e,t,a,n){for(var r=xajax,o=r.tools;e;){if("cmd"==e.nodeName){var s={cmdFullName:"*unknown*"};s.sequence=t,s.request=n,s.context=n.context,o.xml.parseAttributes(e,s),o.xml.parseChildren(e,s),o.queue.push(r.response,s)}else if("xjxrv"==e.nodeName)o._nodeToObject(e.firstChild);else if("debugmsg"!=e.nodeName)throw{code:10004,data:e.nodeName};++t,e=e.nextSibling}},xajax.tools.queue={},xajax.tools.queue.create=function(e){return{start:0,size:e,end:0,commands:[],timeout:null}},xajax.tools.queue.retry=function(e,t){var a=e.retries;if(a){if(1>--a)return!1}else a=t;return e.retries=a,!0},xajax.tools.queue.rewind=function(e){0<e.start?--e.start:e.start=e.size},xajax.tools.queue.setWakeup=function(e,t){null!=e.timeout&&(clearTimeout(e.timeout),e.timeout=null),e.timout=setTimeout((function(){xajax.tools.queue.process(e)}),t)},xajax.tools.queue.process=function(e){null!=e.timeout&&(clearTimeout(e.timeout),e.timeout=null);for(var t=xajax.tools.queue.pop(e);null!=t;){try{if(0==xajax.executeCommand(t))return!1}catch(e){}delete t,t=xajax.tools.queue.pop(e)}return!0},xajax.tools.queue.push=function(e,t){var a=e.end+1;if(a>e.size&&(a=0),a==e.start)throw{code:10003};e.commands[e.end]=t,e.end=a},xajax.tools.queue.pushFront=function(e,t){xajax.tools.queue.rewind(e),e.commands[e.start]=t},xajax.tools.queue.pop=function(e){var t=e.start;if(t==e.end)return null;++t>e.size&&(t=0);var a=e.commands[e.start];return delete e.commands[e.start],e.start=t,a},xajax.responseProcessor={},xajax.responseProcessor.xml=function(e){var t=xajax,a=t.tools,n=t.callback,r=n.global,o=e.callback,s=e.returnValue;if(a.arrayContainsValue(t.responseSuccessCodes,e.request.status)){n.execute([r,o],"onSuccess",e);if(e.request.responseXML){var u=e.request.responseXML;if(u.documentElement){e.status.onProcessing();var l=u.documentElement.firstChild;a.xml.processFragment(l,0,s,e)}}var x={cmdFullName:"Response Complete",sequence:0};x.request=e,x.context=e.context,x.cmd="rcmplt",a.queue.push(t.response,x),null==t.response.timeout&&a.queue.process(t.response)}else a.arrayContainsValue(t.responseRedirectCodes,e.request.status)?(n.execute([r,o],"onRedirect",e),window.location=e.request.getResponseHeader("location"),t.completeResponse(e)):a.arrayContainsValue(t.responseErrorsForAlert,e.request.status)&&(n.execute([r,o],"onFailure",e),t.completeResponse(e));return s},xajax.js={},xajax.js.includeScriptOnce=function(e,t){for(var a=xajax.config.baseDocument.getElementsByTagName("script"),n=a.length,r=0;r<n;++r){var o=a[r];if(o.src&&0<=o.src.indexOf(e))return!0}return xajax.js.includeScript(e,t)},xajax.js.includeScript=function(e,t){var a=xajax.config.baseDocument,n=a.getElementsByTagName("head"),r=a.createElement("script");return r.type="text/javascript",r.src=e,null!=t&&""!=t&&(r.id=t),n[0].appendChild(r),!0},xajax.js.removeScript=function(e,t){for(var a=xajax.config.baseDocument.getElementsByTagName("script"),n=a.length,r=0;r<n;++r){var o=a[r];if(o.src&&0<=o.src.indexOf(e)){if(void 0!==t){var s={};s.data=t,s.context=window,xajax.js.execute(s)}o.parentNode.removeChild(o)}}return!0},xajax.js.sleep=function(e){return!xajax.tools.queue.retry(e,e.property)||(xajax.tools.queue.setWakeup(xajax.response,100),!1)},xajax.js.confirmCommands=function(e,t){if(0==confirm(e))for(;0<t;)xajax.tools.queue.pop(xajax.response),--t;return!0},xajax.js.execute=function(args){args.cmdFullName="execute Javascript";var returnValue=!0;return null==args.context&&(args.context=window,args.data.indexOf("S")),args.context.xajaxDelegateCall=function(){eval(args.data)},args.context.xajaxDelegateCall(),returnValue},xajax.js.waitFor=function(args){args.cmdFullName="waitFor";var bResult=!1,cmdToEval="bResult = (";cmdToEval+=args.data,cmdToEval+=");";try{args.context.xajaxDelegateCall=function(){eval(cmdToEval)},args.context.xajaxDelegateCall()}catch(e){}return 0!=bResult||!xajax.tools.queue.retry(args,args.property)||(xajax.tools.queue.setWakeup(xajax.response,100),!1)},xajax.js.call=function(args){args.cmdFullName="call js function";var parameters=args.data,scr=new Array;if(scr.push(args.func),scr.push("("),void 0!==parameters&&"object"==typeof parameters){var iLen=parameters.length;if(0<iLen){scr.push("parameters[0]");for(var i=1;i<iLen;++i)scr.push(", parameters["+i+"]")}}return scr.push(");"),args.context.xajaxDelegateCall=function(){eval(scr.join(""))},args.context.xajaxDelegateCall(),!0},xajax.js.setFunction=function(args){args.cmdFullName="setFunction";var code=new Array;if(code.push(args.func),code.push(" = function("),"object"==typeof args.property){var separator="";for(var m in args.property)code.push(separator),code.push(args.property[m]),separator=","}else code.push(args.property);return code.push(") { "),code.push(args.data),code.push(" }"),args.context.xajaxDelegateCall=function(){eval(code.join(""))},args.context.xajaxDelegateCall(),!0},xajax.js.wrapFunction=function(args){args.cmdFullName="wrapFunction";var code=new Array;return code.push(args.func),code.push(" = xajax.js.makeWrapper("),code.push(args.func),code.push(", args.property, args.data, args.type, args.context);"),args.context.xajaxDelegateCall=function(){eval(code.join(""))},args.context.xajaxDelegateCall(),!0},xajax.js.makeWrapper=function(origFun,args,codeBlocks,returnVariable,context){var originalCall="";0<returnVariable.length&&(originalCall+=returnVariable,originalCall+=" = ");var originalCall="origFun(";originalCall+=args,originalCall+="); ";var code="wrapper = function(";code+=args,code+=") { ",0<returnVariable.length&&(code+=" var ",code+=returnVariable,code+=" = null;");for(var separator="",bLen=codeBlocks.length,b=0;b<bLen;++b)code+=separator,code+=codeBlocks[b],separator=originalCall;0<returnVariable.length&&(code+=" return ",code+=returnVariable,code+=";"),code+=" } ";var wrapper=null;return context.xajaxDelegateCall=function(){eval(code)},context.xajaxDelegateCall(),wrapper},xajax.dom={},xajax.dom.assign=function(element,property,data){switch("string"==typeof element&&(element=xajax.$(element)),property){case"innerHTML":element.innerHTML=data;break;case"outerHTML":if(void 0===element.outerHTML){var r=xajax.config.baseDocument.createRange();r.setStartBefore(element);var df=r.createContextualFragment(data);element.parentNode.replaceChild(df,element)}else element.outerHTML=data;break;default:xajax.tools.willChange(element,property,data)&&eval("element."+property+" = data;")}return!0},xajax.dom.append=function(element,property,data){return"string"==typeof element&&(element=xajax.$(element)),eval("element."+property+" += data;"),!0},xajax.dom.prepend=function(element,property,data){return"string"==typeof element&&(element=xajax.$(element)),eval("element."+property+" = data + element."+property),!0},xajax.dom.replace=function(element,sAttribute,aData){var sSearch=aData.s,sReplace=aData.r;"innerHTML"==sAttribute&&(sSearch=xajax.tools.getBrowserHTML(sSearch)),"string"==typeof element&&(element=xajax.$(element)),eval("var txt = element."+sAttribute);var bFunction=!1;"function"==typeof txt&&(txt=txt.join(""),bFunction=!0);var start=txt.indexOf(sSearch);if(start>-1){for(var newTxt=[];start>-1;){var end=start+sSearch.length;newTxt.push(txt.substr(0,start)),newTxt.push(sReplace),txt=txt.substr(end,txt.length-end),start=txt.indexOf(sSearch)}newTxt.push(txt),newTxt=newTxt.join(""),(bFunction||xajax.tools.willChange(element,sAttribute,newTxt))&&eval("element."+sAttribute+"=newTxt;")}return!0},xajax.dom.remove=function(e){return"string"==typeof e&&(e=xajax.$(e)),e&&e.parentNode&&e.parentNode.removeChild&&e.parentNode.removeChild(e),!0},xajax.dom.create=function(e,t,a){"string"==typeof e&&(e=xajax.$(e));var n=xajax.config.baseDocument.createElement(t);return n.setAttribute("id",a),e&&e.appendChild(n),!0},xajax.dom.insert=function(e,t,a){"string"==typeof e&&(e=xajax.$(e));var n=xajax.config.baseDocument.createElement(t);return n.setAttribute("id",a),e.parentNode.insertBefore(n,e),!0},xajax.dom.insertAfter=function(e,t,a){"string"==typeof e&&(e=xajax.$(e));var n=xajax.config.baseDocument.createElement(t);return n.setAttribute("id",a),e.parentNode.insertBefore(n,e.nextSibling),!0},xajax.dom.contextAssign=function(args){args.cmdFullName="context assign";var code=[];return code.push("this."),code.push(args.property),code.push(" = data;"),code=code.join(""),args.context.xajaxDelegateCall=function(data){eval(code)},args.context.xajaxDelegateCall(args.data),!0},xajax.dom.contextAppend=function(args){args.cmdFullName="context append";var code=[];return code.push("this."),code.push(args.property),code.push(" += data;"),code=code.join(""),args.context.xajaxDelegateCall=function(data){eval(code)},args.context.xajaxDelegateCall(args.data),!0},xajax.dom.contextPrepend=function(args){args.cmdFullName="context prepend";var code=[];return code.push("this."),code.push(args.property),code.push(" = data + this."),code.push(args.property),code.push(";"),code=code.join(""),args.context.xajaxDelegateCall=function(data){eval(code)},args.context.xajaxDelegateCall(args.data),!0},xajax.css={},xajax.css.add=function(e){for(var t=xajax.config.baseDocument,a=t.getElementsByTagName("head")[0],n=a.getElementsByTagName("link"),r=!1,o=n.length,s=0;s<o&&0==r;++s)0<n[s].href.indexOf(e)&&(r=!0);if(0==r){var u=t.createElement("link");u.rel="stylesheet",u.type="text/css",u.href=e,a.appendChild(u)}return!0},xajax.css.remove=function(e){for(var t=xajax.config.baseDocument.getElementsByTagName("head")[0],a=t.getElementsByTagName("link"),n=0;n<a.length;)0<=a[n].href.indexOf(e)?t.removeChild(a[n]):++n;return!0},xajax.css.waitForCSS=function(e){for(var t=xajax.config.baseDocument.styleSheets,a=[],n=t.length,r=0;r<n;++r){a[r]=0;try{a[r]=t[r].cssRules.length}catch(e){try{a[r]=t[r].rules.length}catch(e){}}}var o=!0;for(n=a.length,r=0;r<n;++r)0==a[r]&&(o=!1);return 0!=o||!xajax.tools.queue.retry(e,e.property)||(xajax.tools.queue.setWakeup(xajax.response,10),!1)},xajax.forms={},xajax.forms.getInput=function(e,t,a){return void 0===window.addEventListener?xajax.forms.getInput=function(e,t,a){return xajax.config.baseDocument.createElement('<input type="'+e+'" name="'+t+'" id="'+a+'">')}:xajax.forms.getInput=function(e,t,a){var n=xajax.config.baseDocument.createElement("input");return n.setAttribute("type",e),n.setAttribute("name",t),n.setAttribute("id",a),n},xajax.forms.getInput(e,t,a)},xajax.forms.createInput=function(e,t,a,n){"string"==typeof e&&(e=xajax.$(e));var r=xajax.forms.getInput(t,a,n);return e&&r&&e.appendChild(r),!0},xajax.forms.insertInput=function(e,t,a,n){"string"==typeof e&&(e=xajax.$(e));var r=xajax.forms.getInput(t,a,n);return r&&e&&e.parentNode&&e.parentNode.insertBefore(r,e),!0},xajax.forms.insertInputAfter=function(e,t,a,n){"string"==typeof e&&(e=xajax.$(e));var r=xajax.forms.getInput(t,a,n);return r&&e&&e.parentNode&&e.parentNode.insertBefore(r,e.nextSibling),!0},xajax.events={},xajax.events.setEvent=function(element,sEvent,code){return"string"==typeof element&&(element=xajax.$(element)),sEvent=xajax.tools.addOnPrefix(sEvent),code=xajax.tools.doubleQuotes(code),eval("element."+sEvent+" = function() { "+code+"; }"),!0},xajax.events.addHandler=function(element,sEvent,fun){return window.addEventListener?xajax.events.addHandler=function(element,sEvent,fun){return"string"==typeof element&&(element=xajax.$(element)),sEvent=xajax.tools.stripOnPrefix(sEvent),eval('element.addEventListener("'+sEvent+'", '+fun+", false);"),!0}:xajax.events.addHandler=function(element,sEvent,fun){return"string"==typeof element&&(element=xajax.$(element)),sEvent=xajax.tools.addOnPrefix(sEvent),eval('element.attachEvent("'+sEvent+'", '+fun+", false);"),!0},xajax.events.addHandler(element,sEvent,fun)},xajax.events.removeHandler=function(element,sEvent,fun){return window.removeEventListener?xajax.events.removeHandler=function(element,sEvent,fun){return"string"==typeof element&&(element=xajax.$(element)),sEvent=xajax.tools.stripOnPrefix(sEvent),eval('element.removeEventListener("'+sEvent+'", '+fun+", false);"),!0}:xajax.events.removeHandler=function(element,sEvent,fun){return"string"==typeof element&&(element=xajax.$(element)),sEvent=xajax.tools.addOnPrefix(sEvent),eval('element.detachEvent("'+sEvent+'", '+fun+", false);"),!0},xajax.events.removeHandler(element,sEvent,fun)},xajax.callback={},xajax.callback.create=function(){var e=xajax,t=e.config,a=e.callback,n={timers:{}};return n.timers.onResponseDelay=a.setupTimer(arguments.length>0?arguments[0]:t.defaultResponseDelayTime),n.timers.onExpiration=a.setupTimer(arguments.length>1?arguments[1]:t.defaultExpirationTime),n.onRequest=null,n.onResponseDelay=null,n.onExpiration=null,n.beforeResponseProcessing=null,n.onFailure=null,n.onRedirect=null,n.onSuccess=null,n.onComplete=null,n},xajax.callback.setupTimer=function(e){return{timer:null,delay:e}},xajax.callback.clearTimer=function(e,t){if(void 0!==e.timers)void 0!==e.timers[t]&&clearTimeout(e.timers[t].timer);else if("object"==typeof e)for(var a=e.length,n=0;n<a;++n)xajax.callback.clearTimer(e[n],t)},xajax.callback.execute=function(e,t,a){if(void 0!==e[t]){var n=e[t];"function"==typeof n&&(void 0!==e.timers[t]?e.timers[t].timer=setTimeout((function(){n(a)}),e.timers[t].delay):n(a))}else if("object"==typeof e)for(var r=e.length,o=0;o<r;++o)xajax.callback.execute(e[o],t,a)},xajax.callback.global=xajax.callback.create(),xajax.response=xajax.tools.queue.create(1e3),xajax.responseSuccessCodes=["0","200"],xajax.responseErrorsForAlert=["400","401","402","403","404","500","501","502","503"],xajax.responseRedirectCodes=["301","302","307"],void 0===xajax.commands&&(xajax.commands=[]),xajax.commands.rcmplt=function(e){return xajax.completeResponse(e.request),!0},xajax.commands.css=function(e){return e.cmdFullName="includeCSS",xajax.css.add(e.data)},xajax.commands.rcss=function(e){return e.cmdFullName="removeCSS",xajax.css.remove(e.data)},xajax.commands.wcss=function(e){return e.cmdFullName="waitForCSS",xajax.css.waitForCSS(e)},xajax.commands.as=function(e){e.cmdFullName="assign/clear";try{return xajax.dom.assign(e.objElement,e.property,e.data)}catch(e){}return!0},xajax.commands.ap=function(e){return e.cmdFullName="append",xajax.dom.append(e.objElement,e.property,e.data)},xajax.commands.pp=function(e){return e.cmdFullName="prepend",xajax.dom.prepend(e.objElement,e.property,e.data)},xajax.commands.rp=function(e){return e.cmdFullName="replace",xajax.dom.replace(e.id,e.property,e.data)},xajax.commands.rm=function(e){return e.cmdFullName="remove",xajax.dom.remove(e.id)},xajax.commands.ce=function(e){return e.cmdFullName="create",xajax.dom.create(e.id,e.data,e.property)},xajax.commands.ie=function(e){return e.cmdFullName="insert",xajax.dom.insert(e.id,e.data,e.property)},xajax.commands.ia=function(e){return e.cmdFullName="insertAfter",xajax.dom.insertAfter(e.id,e.data,e.property)},xajax.commands["c:as"]=xajax.dom.contextAssign,xajax.commands["c:ap"]=xajax.dom.contextAppend,xajax.commands["c:pp"]=xajax.dom.contextPrepend,xajax.commands.s=function(e){return e.cmdFullName="sleep",xajax.js.sleep(e)},xajax.commands.ino=function(e){return e.cmdFullName="includeScriptOnce",xajax.js.includeScriptOnce(e.data,e.dvn)},xajax.commands.in=function(e){return e.cmdFullName="includeScript",xajax.js.includeScript(e.data)},xajax.commands.rjs=function(e){return e.cmdFullName="removeScript","object"==typeof e.data?2==e.data.length?xajax.js.removeScript(e.data[0],e.data[1]):xajax.js.removeScript(e.data[0]):xajax.js.removeScript(e.data)},xajax.commands.wf=xajax.js.waitFor,xajax.commands.js=xajax.js.execute,xajax.commands.jc=xajax.js.call,xajax.commands.sf=xajax.js.setFunction,xajax.commands.wpf=xajax.js.wrapFunction,xajax.commands.al=function(e){return e.cmdFullName="alert",alert(e.data),!0},xajax.commands.modconf=function(e){e.cmdFullName="modal_confirm";var t=JSON.parse(e.data);return modal_confirm(t.title,t.content,t.call_back_function_ok,t.call_back_args_ok,t.call_back_function_ko,t.call_back_args_ko,t.open_delay,t.open_delayclose_delay),!0},xajax.commands.cc=function(e){return e.cmdFullName="confirmCommands",xajax.js.confirmCommands(e.data,e.id)},xajax.commands.ci=function(e){return e.cmdFullName="createInput",xajax.forms.createInput(e.id,e.type,e.data,e.property)},xajax.commands.ii=function(e){return e.cmdFullName="insertInput",xajax.forms.insertInput(e.id,e.type,e.data,e.property)},xajax.commands.iia=function(e){return e.cmdFullName="insertInputAfter",xajax.forms.insertInputAfter(e.id,e.type,e.data,e.property)},xajax.commands.ev=function(e){return e.cmdFullName="addEvent",xajax.events.setEvent(e.id,e.property,e.data)},xajax.commands.ah=function(e){return e.cmdFullName="addHandler",xajax.events.addHandler(e.id,e.property,e.data)},xajax.commands.rh=function(e){return e.cmdFullName="removeHandler",xajax.events.removeHandler(e.id,e.property,e.data)},xajax.commands.dbg=function(e){return e.cmdFullName="debug message",!0},xajax.initializeRequest=function(e){var t=xajax,a=t.config;e.append=function(e,t){if(void 0!==this[e])for(var a in t)void 0===this[e][a]&&(this[e][a]=t[a]);else this[e]=t},e.append("commonHeaders",a.commonHeaders),e.append("postHeaders",a.postHeaders),e.append("getHeaders",a.getHeaders),e.set=function(e,t){void 0===this[e]&&(this[e]=t)},e.set("statusMessages",a.statusMessages),e.set("waitCursor",a.waitCursor),e.set("mode",a.defaultMode),e.set("method",a.defaultMethod),e.set("URI",a.requestURI),e.set("httpVersion",a.defaultHttpVersion),e.set("contentType",a.defaultContentType),e.set("retry",a.defaultRetry),e.set("returnValue",a.defaultReturnValue),e.set("maxObjectDepth",a.maxObjectDepth),e.set("maxObjectSize",a.maxObjectSize),e.set("context",window);var n=t.callback,r=(n.global,n.create());if(r.take=function(e,t){void 0!==e[t]&&(r[t]=e[t],r.hasEvents=!0),delete e[t]},r.take(e,"onRequest"),r.take(e,"onResponseDelay"),r.take(e,"onExpiration"),r.take(e,"beforeResponseProcessing"),r.take(e,"onFailure"),r.take(e,"onRedirect"),r.take(e,"onSuccess"),r.take(e,"onComplete"),void 0!==e.callback?r.hasEvents&&(e.callback=[e.callback,r]):e.callback=r,e.status=e.statusMessages?a.status.update():a.status.dontUpdate(),e.cursor=e.waitCursor?a.cursor.update():a.cursor.dontUpdate(),e.method=e.method.toUpperCase(),"GET"!=e.method&&(e.method="POST"),e.requestRetry=e.retry,e.append("postHeaders",{"content-type":e.contentType}),delete e.append,delete e.set,delete e.take,void 0===e.URI)throw{code:10005}},xajax.processParameters=function(e){var t=xajax.tools,a=[],n="";for(var r in e.functionName)"constructor"!=r&&(a.push(n),a.push(r),a.push("="),a.push(encodeURIComponent(e.functionName[r])),n="&");var o=new Date;if(a.push("&xjxr="),a.push(o.getTime()),delete o,e.parameters)for(let n in e.parameters){var s=e.parameters[n];if("object"==typeof s&&null!=s){try{var u={depth:0};u.maxDepth=e.maxObjectDepth,u.size=0,u.maxSize=e.maxObjectSize,s=t._objectToXML(s,u)}catch(e){s=""}a.push("&xjxargs[]="),s=encodeURIComponent(s),a.push(s)}else if(a.push("&xjxargs["+n+"]="),void 0===(s=t._escape(s))||null==s)a.push("*");else{var l=typeof s;"string"==l?a.push("S"):"boolean"==l?a.push("B"):"number"==l&&a.push("N"),s=encodeURIComponent(s),a.push(s)}}e.requestURI=e.URI,"GET"==e.method&&(e.requestURI+=-1==e.requestURI.indexOf("?")?"?":"&",e.requestURI+=a.join(""),a=[]),e.requestData=a.join("")},xajax.prepareRequest=function(e){var t=xajax.tools;e.request=t.getRequestObject(),e.setRequestHeaders=function(e){if("object"==typeof e)for(var t in e)this.request.setRequestHeader(t,e[t])},e.setCommonRequestHeaders=function(){this.setRequestHeaders(this.commonHeaders)},e.setPostRequestHeaders=function(){this.setRequestHeaders(this.postHeaders)},e.setGetRequestHeaders=function(){this.setRequestHeaders(this.getHeaders)},"asynchronous"==e.mode?(e.request.onreadystatechange=function(){4==e.request.readyState&&xajax.responseReceived(e)},e.finishRequest=function(){return this.returnValue}):e.finishRequest=function(){return xajax.responseReceived(e)},void 0!==e.userName&&void 0!==e.password?e.open=function(){this.request.open(this.method,this.requestURI,"asynchronous"==this.mode,e.userName,e.password)}:e.open=function(){this.request.open(this.method,this.requestURI,"asynchronous"==this.mode)},"POST"==e.method?e.applyRequestHeaders=function(){this.setCommonRequestHeaders();try{this.setPostRequestHeaders()}catch(e){throw this.method="GET",this.requestURI+=-1==this.requestURI.indexOf("?")?"?":"&",this.requestURI+=this.requestData,this.requestData="",0==this.requestRetry&&(this.requestRetry=1),e}}:e.applyRequestHeaders=function(){this.setCommonRequestHeaders(),this.setGetRequestHeaders()}},xajax.request=function(){var e=arguments.length;if(0==e)return!1;var t={};1<e&&(t=arguments[1]),t.functionName=arguments[0],t.parameters.CUP=localStorage.getItem("CUP");var a=xajax;for(a.initializeRequest(t),a.processParameters(t);0<t.requestRetry;)try{return--t.requestRetry,a.prepareRequest(t),a.submitRequest(t)}catch(e){if(xajax.callback.execute([xajax.callback.global,t.callback],"onFailure",t),0==t.requestRetry)throw e}},xajax.call=function(){var e=arguments.length;if(0==e)return!1;var t={};1<e&&(t=arguments[1]),t.functionName={xjxfun:arguments[0]};var a=xajax;for(a.initializeRequest(t),a.processParameters(t);0<t.requestRetry;)try{return--t.requestRetry,a.prepareRequest(t),a.submitRequest(t)}catch(e){if(xajax.callback.execute([xajax.callback.global,t.callback],"onFailure",t),0==t.requestRetry)throw e}},xajax.submitRequest=function(e){e.status.onRequest();var t=xajax.callback,a=t.global,n=e.callback;return t.execute([a,n],"onResponseDelay",e),t.execute([a,n],"onExpiration",e),t.execute([a,n],"onRequest",e),e.open(),e.applyRequestHeaders(),e.cursor.onWaiting(),e.status.onWaiting(),xajax._internalSend(e),e.finishRequest()},xajax._internalSend=function(e){e.request.send(e.requestData)},xajax.abortRequest=function(e){e.aborted=!0,e.request.abort(),xajax.completeResponse(e)},xajax.responseReceived=function(e){var t=xajax,a=t.callback,n=a.global,r=e.callback;if(!e.aborted){a.clearTimer([n,r],"onExpiration"),a.clearTimer([n,r],"onResponseDelay"),a.execute([n,r],"beforeResponseProcessing",e);var o=t.getResponseProcessor(e);return void 0===o?(a.execute([n,r],"onFailure",e),void t.completeResponse(e)):o(e)}},xajax.getResponseProcessor=function(e){var t;if(void 0===e.responseProcessor){var a=e.request.getResponseHeader("content-type");a&&0<=a.indexOf("text/xml")&&(t=xajax.responseProcessor.xml)}else t=e.responseProcessor;return t},xajax.executeCommand=function(e){return!xajax.commands[e.cmd]||(e.id&&(e.objElement=xajax.$(e.id)),0!=xajax.commands[e.cmd](e))||(xajax.tools.queue.pushFront(xajax.response,e),!1)},xajax.completeResponse=function(e){xajax.callback.execute([xajax.callback.global,e.callback],"onComplete",e),e.cursor.onComplete(),e.status.onComplete(),delete e.functionName,delete e.requestURI,delete e.requestData,delete e.requestRetry,delete e.request,delete e.set,delete e.open,delete e.setRequestHeaders,delete e.setCommonRequestHeaders,delete e.setPostRequestHeaders,delete e.setGetRequestHeaders,delete e.applyRequestHeaders,delete e.finishRequest,delete e.status,delete e.cursor},xajax.$=xajax.tools.$,xajax.getFormValues=xajax.tools.getFormValues,xajax.isLoaded=!0,xjx={},xjx.$=xajax.tools.$,xjx.getFormValues=xajax.tools.getFormValues,xjx.call=xajax.call,xjx.request=xajax.request;